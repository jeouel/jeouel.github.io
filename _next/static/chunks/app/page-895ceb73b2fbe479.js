(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2805:function(e,s,r){Promise.resolve().then(r.bind(r,9765))},9765:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return VideoInstructionGenerator}});var t=r(7437),i=r(2265),a=r(7042),n=r(4769);function cn(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,n.m6)((0,a.W)(s))}let l=i.forwardRef((e,s)=>{let{className:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:cn("rounded-xl border bg-card text-card-foreground shadow",r),...i})});l.displayName="Card";let d=i.forwardRef((e,s)=>{let{className:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:cn("flex flex-col space-y-1.5 p-6",r),...i})});d.displayName="CardHeader";let o=i.forwardRef((e,s)=>{let{className:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:cn("font-semibold leading-none tracking-tight",r),...i})});o.displayName="CardTitle";let c=i.forwardRef((e,s)=>{let{className:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:cn("text-sm text-muted-foreground",r),...i})});c.displayName="CardDescription";let u=i.forwardRef((e,s)=>{let{className:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:cn("p-6 pt-0",r),...i})});u.displayName="CardContent";let x=i.forwardRef((e,s)=>{let{className:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:cn("flex items-center p-6 pt-0",r),...i})});x.displayName="CardFooter";var m=r(4949),p=r(6061);let h=(0,p.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),f=i.forwardRef((e,s)=>{let{className:r,variant:i,size:a,asChild:n=!1,...l}=e,d=n?m.g7:"button";return(0,t.jsx)(d,{className:cn(h({variant:i,size:a,className:r})),ref:s,...l})});f.displayName="Button";let g=i.forwardRef((e,s)=>{let{className:r,...i}=e;return(0,t.jsx)("textarea",{className:cn("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...i})});g.displayName="Textarea";var v=r(706);let j=(0,p.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),b=i.forwardRef((e,s)=>{let{className:r,...i}=e;return(0,t.jsx)(v.f,{ref:s,className:cn(j(),r),...i})});b.displayName=v.f.displayName;var N=r(1541),y=r(3008),w=r(2750),_=r(6264),C=r(1981);let z=(0,p.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),I=i.forwardRef((e,s)=>{let{className:r,variant:i,...a}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:cn(z({variant:i}),r),...a})});I.displayName="Alert";let S=i.forwardRef((e,s)=>{let{className:r,...i}=e;return(0,t.jsx)("h5",{ref:s,className:cn("mb-1 font-medium leading-none tracking-tight",r),...i})});S.displayName="AlertTitle";let k=i.forwardRef((e,s)=>{let{className:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:cn("text-sm [&_p]:leading-relaxed",r),...i})});k.displayName="AlertDescription";let G="https://n8n.tools.intelligenceindustrielle.com/webhook/6852d509-086a-4415-a48c-ca72e7ceedb3";function VideoInstructionGenerator(){let[e,s]=(0,i.useState)(null),[r,a]=(0,i.useState)(""),[n,x]=(0,i.useState)(!1),[m,p]=(0,i.useState)(!1),[h,v]=(0,i.useState)(""),[j,z]=(0,i.useState)(""),[S,E]=(0,i.useState)(""),uploadToGoogleStorage=async(e,s)=>{let r=await fetch(e,{method:"POST",headers:{"Content-Length":s.size.toString(),"X-Goog-Upload-Offset":"0","X-Goog-Upload-Command":"upload, finalize"},body:s});if(!r.ok)throw Error("\xc9chec de l'upload du fichier");let t=await r.json();return t.file.uri},generateInstructions=async()=>{if(!e){z("Veuillez s\xe9lectionner un fichier vid\xe9o");return}x(!0),z(""),v("");try{var s,t,i,a;E("Pr\xe9paration de l'upload...");let n=await fetch(G,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"GEMINI_FILE_UPLOAD",fileSize:e.size,mimeType:e.type})}),l=await n.json();if(!l.success||!(null===(s=l.results[0])||void 0===s?void 0:s.upload_url))throw Error((null===(i=l.results[0])||void 0===i?void 0:i.error)||"Erreur lors de la pr\xe9paration de l'upload");E("Upload du fichier en cours...");let d=await uploadToGoogleStorage(l.results[0].upload_url,e);E("Analyse de la vid\xe9o en cours..."),x(!1),p(!0);let o=await fetch(G,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"GEMINI_FILE_ANALYZE",prompt:"Analyse cette vid\xe9o et g\xe9n\xe8re un guide d'instruction d\xe9taill\xe9 \xe9tape par \xe9tape. \n      \nInstructions sp\xe9cifiques: ".concat(r||"G\xe9n\xe8re un guide complet et d\xe9taill\xe9",'\n\nFormat de r\xe9ponse souhait\xe9 en JSON:\n{\n  "titre": "Titre du guide",\n  "description": "Description g\xe9n\xe9rale",\n  "etapes": [\n    {\n      "numero": 1,\n      "titre": "Titre de l\'\xe9tape",\n      "description": "Description d\xe9taill\xe9e",\n      "conseils": ["Conseil 1", "Conseil 2"]\n    }\n  ],\n  "materiel_requis": ["Item 1", "Item 2"],\n  "duree_estimee": "X minutes",\n  "niveau_difficulte": "D\xe9butant/Interm\xe9diaire/Avanc\xe9"\n}'),uri:d})}),c=await o.json();if(!c.success||!(null===(t=c.results[0])||void 0===t?void 0:t.gemini_response))throw Error((null===(a=c.results[0])||void 0===a?void 0:a.error)||"Erreur lors de l'analyse de la vid\xe9o");v(c.results[0].gemini_response)}catch(e){z(e instanceof Error?e.message:"Une erreur est survenue")}finally{x(!1),p(!1),E("")}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"G\xe9n\xe9rateur de Guides d'Instruction"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Uploadez une vid\xe9o et obtenez automatiquement un guide d'instruction d\xe9taill\xe9"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)(l,{children:[(0,t.jsxs)(d,{children:[(0,t.jsxs)(o,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Z,{className:"w-5 h-5"}),"Upload de Vid\xe9o"]}),(0,t.jsx)(c,{children:"Glissez-d\xe9posez votre fichier vid\xe9o ou cliquez pour s\xe9lectionner"})]}),(0,t.jsxs)(u,{className:"space-y-4",children:[(0,t.jsxs)("div",{onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation();let r=Array.from(e.dataTransfer.files),t=r.find(e=>e.type.startsWith("video/"));t?(s(t),z("")):z("Veuillez s\xe9lectionner un fichier vid\xe9o valide")},className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors relative ".concat(e?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"),children:[e?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Z,{className:"w-12 h-12 text-green-500 mx-auto"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[(e.size/1048576).toFixed(2)," MB"]})]})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(w.Z,{className:"w-12 h-12 text-gray-400 mx-auto"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium",children:"Glissez votre vid\xe9o ici"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"ou cliquez pour s\xe9lectionner"})]})]}),(0,t.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];t&&t.type.startsWith("video/")?(s(t),z("")):z("Veuillez s\xe9lectionner un fichier vid\xe9o valide")},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b,{htmlFor:"instructions",children:"Instructions sp\xe9cifiques (optionnel)"}),(0,t.jsx)(g,{id:"instructions",placeholder:"Ex: Concentre-toi sur les aspects techniques, inclus des mesures de s\xe9curit\xe9, g\xe9n\xe8re un guide pour d\xe9butants...",value:r,onChange:e=>a(e.target.value),rows:4})]}),(0,t.jsx)(f,{onClick:generateInstructions,disabled:!e||n||m,className:"w-full",size:"lg",children:n||m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{className:"w-4 h-4 mr-2 animate-spin"}),S||"Traitement en cours..."]}):"G\xe9n\xe9rer le Guide d'Instruction"}),j&&(0,t.jsxs)(I,{variant:"destructive",children:[(0,t.jsx)(C.Z,{className:"h-4 w-4"}),(0,t.jsx)(k,{children:j})]})]})]}),(0,t.jsxs)(l,{children:[(0,t.jsxs)(d,{children:[(0,t.jsxs)(o,{className:"flex items-center justify-between",children:["Guide d'Instruction G\xe9n\xe9r\xe9",h&&(0,t.jsx)(f,{onClick:()=>{if(!h)return;let e=new Blob([h],{type:"application/json"}),s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download="guide-instruction-".concat(Date.now(),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},variant:"outline",size:"sm",children:"T\xe9l\xe9charger JSON"})]}),(0,t.jsx)(c,{children:"Le guide d\xe9taill\xe9 bas\xe9 sur votre vid\xe9o appara\xeetra ici"})]}),(0,t.jsx)(u,{children:h?(0,t.jsx)("div",{className:"max-h-96 overflow-y-auto",children:(e=>{try{var s,r;let i=JSON.parse(e);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:i.titre}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:i.description}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,t.jsx)("strong",{children:"Dur\xe9e estim\xe9e:"})," ",i.duree_estimee]}),(0,t.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,t.jsx)("strong",{children:"Niveau:"})," ",i.niveau_difficulte]}),(0,t.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,t.jsx)("strong",{children:"\xc9tapes:"})," ",(null===(s=i.etapes)||void 0===s?void 0:s.length)||0]})]})]}),i.materiel_requis&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Mat\xe9riel requis"}),(0,t.jsx)("ul",{className:"list-disc list-inside space-y-1",children:i.materiel_requis.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Instructions \xe9tape par \xe9tape"}),(0,t.jsx)("div",{className:"space-y-4",children:null===(r=i.etapes)||void 0===r?void 0:r.map((e,s)=>(0,t.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[(0,t.jsxs)("h4",{className:"font-semibold",children:["\xc9tape ",e.numero,": ",e.titre]}),(0,t.jsx)("p",{className:"text-gray-700 mt-1",children:e.description}),e.conseils&&e.conseils.length>0&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("strong",{className:"text-sm",children:"Conseils:"}),(0,t.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-600 mt-1",children:e.conseils.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]})]},s))})]})]})}catch(s){return(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:e})}})(h)}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(w.Z,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"Uploadez une vid\xe9o pour g\xe9n\xe9rer le guide d'instruction"})]})})]})]})]})})}}},function(e){e.O(0,[590,971,472,744],function(){return e(e.s=2805)}),_N_E=e.O()}]);